name: CI

on:
  pull_request:
    branches: [ master ]

  workflow_dispatch:

env:
  MYSQL_VERSION: 8.0.31
  MYSQL_DB: inventory
  MYSQL_USER: root
  MYSQL_ROOT_PASSWORD: 1q2w3e4r5t
  JAVA_VERSION: 1.17

jobs:
  build:
    runs-on: ubuntu-latest
    #services:
    #  postgres:
    #    image: mysql:8.0.31
    #    env:
    #      MYSQL_DB: ${{ env.MYSQL_DB }}
    #      MYSQL_USER: ${{ env.MYSQL_USER }}
    #      MYSQL_PASSWORD: ${{ env.MYSQL_ROOT_PASSWORD }}
    #    ports:
    #      - 3306:3306
    #    options: --health-cmd pg_isready --health-interval 10s --health-timeout 5s --health-retries 5
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-java@v1.4.3
        with:
          java-version: ${{ env.JAVA_VERSION }}
      - name: Maven Clean Package
        run: |
          ./mvnw clean install -P build-frontend